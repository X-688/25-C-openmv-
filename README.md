# 25C - 目标物测量装置

本项目基于单目视觉实现目标物的精密测量（精度可达 0.01mm），利用 OpenMV H7 摄像头，通过串口 (UART) 与单片机通信，根据接收到的指令执行不同功能。

## 硬件要求

- OpenMV H7 摄像头

## 功能概述

- **校准模式**  
  利用 A4 白板框架（通过 [`Find_Frame`] 实现）进行检测与校准，根据白框的比例判断旋转角度，调整测距参数。

- **默认模式**  
  在校准成功后，通过 [`find_min_function`]检测黑色矩形目标，计算目标物的尺寸（通过目标矩形的边长及旋转修正）。

- **数字识别模式**  
  调用 [`digital_function`]在黑色矩形区域中提取并识别数字，执行特定的功能。

- **调试模式**  
  根据串口接收到的指令，可动态调整黑白色阈值 (BK_TH 与 WT_TH)，帮助优化图像处理效果。

## 运行流程

1. **初始化**  
   - 使用 `init()` 配置摄像头参数（像素格式、分辨率、窗口裁剪、图像反转等）。
   
2. **校准阶段**  
   - 进入校准模式，通过 `Find_Frame()` 检测 A4 框架，获取 A4_Range 并计算测距参数。
   
3. **功能切换**  
   - 串口接收数据后，根据指令执行：
     - 默认模式：检测最小黑色矩形并输出测量数据。
     - 数字识别模式：识别黑色区域内的数字。
     - 调试模式：调整阈值参数进行图像调试。

4. **数据传输**  
   - 测量结果通过 UART 发送，数据打包由 `pack_data()` 实现。

## 使用说明

- 将 `openmv.py` 烧录至 OpenMV H7 开发板。
- 接通硬件设备后，通过串口发送不同指令：
  - `0xff`：进入默认测量模式。
  - `0xa0` / `0xa1`：分别减少或增加黑色区域范围判定。
  - `0xb0` / `0xb1`：分别减少或增加白色区域范围判定。
  - 数字 `0-9`：启动数字识别模式，对应处理并发送测量数据。

请根据实际应用环境调整阈值和 ROI 参数，确保光照条件及 A4 框架位置符合要求，以获得最